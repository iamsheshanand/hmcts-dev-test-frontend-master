{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/select/macro.njk" import govukSelect %}

{% extends "template.njk" %}

{% block content %}
  <h1 class="govuk-heading-m">{% if task %}Edit Task{% else %}Create Task{% endif %}</h1>
  {% if error %}
    <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1">
      <h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem</h2>
      <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
          <li>{{ error }}</li>
        </ul>
      </div>
    </div>
  {% endif %}
    <form method="POST" action="{% if task %}/tasks/{{ task.id }}{% else %}/tasks{% endif %}">
      <input type="hidden" name="_method" value="PATCH" />
    {{ govukSelect({
      id: "status",
      name: "status",
      label: {
        text: "Status"
      },
      items: [
        {
          value: "TODO",
          text: "To Do",
          selected: "true"
        },
        {
          value: "COMPLETED",
          text: "Completed"
        },
        {
          value: "IN_PROGRESS",
          text: "In Progress"
        }
      ]
    }) }}

    {{ govukButton({ text: "Save" }) }}
  </form>
{% endblock %}
